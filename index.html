<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <title>Búsqueda de Pizza</title>
  </head>

  <body>
    <h1>Búsqueda de Pizza</h1>

    <form onsubmit="event.preventDefault(); realizarBusqueda();">
      <label for="numero">Introduce el ID de la Pizza:</label>
      <input
        type="number"
        id="numero"
        placeholder="Ingrese el ID de la pizza"
      />
      <button type="submit">Buscar</button>
    </form>

    <div id="resultado"></div>

    <script>
      var pizzas = [
        {
          id: 1,
          nombre: "Pizza de Muzzarella",
          precio: 500,
          ingredientes: ["Muzzarella", "Tomate", "Aceitunas"],
          imagen: "./img/muzzarella.png",
        },

        {
          id: 2,
          nombre: "Pizza de Cebolla",
          precio: 1500,
          ingredientes: ["Muzzarella", "Tomate", "Cebolla"],
          imagen: "./img/cebolla.png",
        },

        {
          id: 3,
          nombre: "Pizza 4 Quesos",
          precio: 1380,
          ingredientes: [
            "Muzzarella",
            "Tomate",
            "Queso Azul",
            "Parmesano",
            "Roquefort",
          ],
          imagen: "./img/4quesos.png",
        },

        {
          id: 4,
          nombre: "Pizza Especial",
          precio: 1000,
          ingredientes: ["Muzzarella", "Tomate", "Rucula", "Jamón"],
          imagen: "./img/especial.png",
        },

        {
          id: 5,
          nombre: "Pizza con Anana",
          precio: 600,
          ingredientes: ["Muzzarella", "Tomate", "Anana"],
          imagen: "./img/anana.png",
        },
      ];

      function realizarBusqueda() {
        var numero = parseInt(document.getElementById("numero").value);
        var resultadoContainer = document.getElementById("resultado");
        var pizzaEncontrada = pizzas.find(function (pizza) {
          return pizza.id === numero;
        });

        if (pizzaEncontrada) {
          var cardHTML = `
                        <div class="card">
                            <h2>${pizzaEncontrada.nombre}</h2>
                            <img src="${pizzaEncontrada.imagen}" alt="${pizzaEncontrada.nombre}">
                            <p>Precio: $${pizzaEncontrada.precio}</p>
                        </div>
                    `;
          resultadoContainer.innerHTML = cardHTML;
        } else {
          resultadoContainer.innerHTML =
            "No se encontró ninguna pizza con ese ID.";
        }
      }

      var pizzaGuardada = localStorage.getItem("ultimaPizza");
      if (pizzaGuardada) {
        var resultadoContainer = document.getElementById("resultado");
        resultadoContainer.innerHTML = pizzaGuardada;
      }

      function realizarBusqueda() {
        var numero = parseInt(document.getElementById("numero").value);
        var resultadoContainer = document.getElementById("resultado");
        var pizzaEncontrada = pizzas.find(function (pizza) {
          return pizza.id === numero;
        });

        if (pizzaEncontrada) {
          var cardHTML = `
                      <div class="card">
                          <h2>${pizzaEncontrada.nombre}</h2>
                          <img src="${pizzaEncontrada.imagen}" alt="${pizzaEncontrada.nombre}">
                          <p>Precio: $${pizzaEncontrada.precio}</p>
                      </div>
                  `;
          resultadoContainer.innerHTML = cardHTML;

          // Guardar la última pizza buscada en localStorage
          localStorage.setItem("ultimaPizza", cardHTML);
        } else {
          resultadoContainer.innerHTML =
            "No se encontró ninguna pizza con ese ID.";
        }
      }
    </script>
  </body>
  <script src="./index.js"></script>
</html>
